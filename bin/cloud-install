#!/bin/sh

set -e

. /usr/share/cloud-install-common/profiles/common.sh
. /usr/share/cloud-install-common/profiles/maas.sh
. /usr/share/cloud-install-common/profiles/juju.sh
. /usr/share/cloud-install-common/profiles/multi.sh
. /usr/share/cloud-install-common/profiles/single.sh

if [ ! -e /var/log/cloud-install.log ]; then
	touch /var/log/cloud-install.log
	chmod 0600 /var/log/cloud-install.log
fi
exec 2>> /var/log/cloud-install.log

trap exitInstall EXIT
trap "" PIPE

#disableBlank

if [ ! -e /etc/.cloud-installed ]; then
    db_get cloud-install/install-type
    case $RET in
        Multi-system)
	    multiInstall
	    ;;
	"Single system")
	    singleInstall
	    ;;
	"Landscape managed")
	    ;;
    esac
    touch /etc/.cloud-installed
fi

