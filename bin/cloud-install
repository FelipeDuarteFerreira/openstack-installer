#!/bin/sh

set -e

. /usr/share/cloud-install/common/common.sh
. /usr/share/cloud-install/common/maas.sh
. /usr/share/cloud-install/common/juju.sh
. /usr/share/cloud-install/common/multi.sh
. /usr/share/cloud-install/common/single.sh

log="/var/log/cloud-install.log"
( umask 066 && touch "$log" )
exec 2>> "$log"

trap exitInstall EXIT
trap "" PIPE

#disableBlank

if [ ! -e /etc/.cloud-installed ]; then
    RET=$(confValue cloud-install-multi cloud-install/install-type)
    case $RET in
	Multi-system)
	    multiInstall
	    ;;
	"Single system")
	    singleInstall
	    ;;
	"Landscape managed")
	    ;;
    esac
    touch /etc/.cloud-installed
fi

